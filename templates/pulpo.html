<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/pulpo.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'js/daterangepicker.css' %}"/>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-bundle.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-ui.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-exports.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-radar.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-circular-gauge.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/themes/dark_provence.js"></script>
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">
    <title>AETO WEB</title>
</head>


<body>
{% comment %} menu hamburguesa mobile {% endcomment %}

    {% include 'nav.html' %}
    <div class="all-cont">
        <ul class="head-menu">
            <li class="menu_li--left"><img src="{% static 'images/Grupo 66.png' %}" alt=""></li>
            <form id="form_fecha" action="{% url 'dashboards:buscar' %}" method="GET" class="form-head">
            <!-- <li class="head-item menu_li--right">
                    <div class="multiselect3">
                        <div class="selectBox3" onclick="showCheckboxes3()">
                            <select name="OS">
                                <option value="1">Compañia</option> 
                            </select>
                            <div class="overSelect3"></div>
                        </div>
                        <div id="checkboxes3" style="background-color: #171717;">
                            <label><input type="checkbox"><p>{{compania}}</p></label>
                        </div>
                    </div>
                </li> -->
                <!-- <li class="head-item menu_li--right">
                    <div class="multiselect2">
                        <div class="selectBox2" onclick="showCheckboxes2()">
                            <select name="OS">
                                <option value="1">Ubicación</option> 
                            </select>
                            <div class="overSelect2"></div>
                        </div>
                        <div id="checkboxes2" style="background-color: #171717;">
                            {% for flota in flotas %}
                                <label><input type="checkbox" name="flota" value="{{flota}}"><p>{{flota}}</p></label>
                            {% endfor %}
                        </div>
                    </div>
                </li> -->
                <!-- <li class="head-item menu_li--right">
                    <div class="multiselect">
                        <div class="selectBox" onclick="showCheckboxes()">
                            <select name="OS">
                                <option value="1">Clase</option> 
                            </select>
                            <div class="overSelect"></div>
                        </div>
                        <div id="checkboxes" style="background-color: #171717;">
                            {% for clase in clases_compania %}
                                <label><input type="checkbox" name="clase" value="{{clase}}"><p>{{clase}}</p></label>
                            {% endfor %}

                        </div>
                    </div>
                </li> -->
                
                <!-- <li class="head-item">
                    <input class="btn-head-item" type="text" name="fecha1" {% if fecha %}value="{{fecha}}"{% else %}value="Seleccionar Fecha"{% endif %} />
                </li> -->
                <!-- <li class="head-item"><button class="btn-head-item" type="submit">Buscar</button></li>
                <li class="head-item"><a class="" id="btn-limpiar" href="{% url 'dashboards:pulpo' %}" ><span class="icon-trash2"></span></a></li> -->

                <nav class="btn-group" id="nav-dash">
                    <button class="btn btn-aeto" id="btn-limpiar">
                        <span class="icon-trash2"></span>
                        <span class="icont-trash2 blur"></span>
                    </button>

                    <input class="input-aeto" id="input-fecha" type="text" name="fecha1" {% if fecha %}value="{{fecha}}"{% else %}value="Seleccionar Fecha"{% endif %} />

                    <div class="multiselect input-aeto">
                        <div class="selectBox" onclick="showCheckboxes()">
                            <select name="OS" class="btn-aeto">
                                <option value="1">Clase</option> 
                            </select>
                            <div class="overSelect"></div>
                        </div>
                        <div id="checkboxes" style="background-color: #171717;">
                            {% for clase in clases_compania %}
                                <label><input type="checkbox" name="clase" value="{{clase}}"><p>{{clase}}</p></label>
                            {% endfor %}

                        </div>
                    </div>

                    <div class="multiselect input-aeto">
                        <div class="selectBox2" onclick="showCheckboxes2()">
                            <select name="OS" class="btn-aeto">
                                <option value="1">Ubicación</option> 
                            </select>
                            <div class="overSelect2"></div>
                        </div>
                        <div id="checkboxes2" style="background-color: #171717;">
                            {% for flota in flotas %}
                                <label><input type="checkbox" name="flota" value="{{flota}}"><p>{{flota}}</p></label>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="multiselect input-aeto">
                        <div class="selectBox3" onclick="showCheckboxes3()">
                            <select name="OS" class="btn-aeto">
                                <option value="1">Compañia</option> 
                            </select>
                            <div class="overSelect3"></div>
                        </div>
                        <div id="checkboxes3" style="background-color: #171717;">
                            <label><input type="checkbox"><p>{{compania}}</p></label>
                        </div>
                    </div>

                    <button class="btn btn-aeto" id="btn-buscar" type="submit">
                        <span>Buscar</span>
                        <span class="blur">Buscar</span>
                        <span class="icon-magnifier"></span>
                    </button>
                    
                </nav>

            </form>

        </ul>
        <div class="hor-ver">
            <div class="horizontal">
            <div class="horizontal_graficas--1">
                <div id="p1" class="sec1_grafica">
                    <button class="icono-pantallaC" id="mostrarG1" onclick="openFullscreenP1();"><span id="icon-P" class="icon-fullscreen"></span></button>
                    <button class="icono-pantallaC" id="ocultarG1" onclick="closeFullscreen();"><span id="icon-P2" class="icon-fullscreen_exit"></span></button>
                    <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                    <h3>Vehículos inflados</h3>
                    <div class="cont-horizontal"  id="hor1">
                        <div class="graf-barras-1">
                            <div class="cont_graf-barras-1">
                               <div id="score-gauge"></div>
                            </div>
                        </div>
                        <div class="porcientos" id="porcientos1">
                            {% if fecha_con_formato %}
                                <p class="divis">{{fecha_con_formato}}</p>
                            {% else %}
                                {% if fecha %}
                                    <p class="divis">{{fecha}}</p>
                                {% else %}
                                    {% if clase %}
                                        <p class="divis">{{clase}}</p>
                                    {% elif flota %}
                                        <p class="divis">{{flota}}</p>
                                    {% else %}
                                        <p class="divis">Último mes</p>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if porcentaje_inflado %}
                                {% if porcentaje_inflado == "Nada" %}
                                    <p class="percent">0/0</p>
                                {% else %}
                                    <p class="percent">{{cantidad_inflado}}/{{cantidad_total}}</p>
                                {% endif %}
                            {% else %}
                                {% if porcentaje_inflado == 0 %}
                                    <p class="percent">{{cantidad_inflado}}/{{cantidad_total}}</p>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="graf-barras">
                            <div class="cont_graf-spline">
                                <div id="score-spline"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="p2" class="sec1_grafica">
                    <button class="icono-pantallaC" id="mostrarG2" onclick="openFullscreenP2();"><span class="icon-fullscreen"></span></button>
                    <button class="icono-pantallaC" id="ocultarG2" onclick="closeFullscreenP2();"><span class="icon-fullscreen_exit"></span></button>
                    <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                    <h3>Entradas correctas</h3>
                    <div class="cont-horizontal" id="hor2">
                        <div class="graf-barras-1">
                            <div class="cont_graf-barras-1">
                                <div id="score-gauge2"></div>
                                {% comment %} <canvas id="demo2"></canvas>
                                {% if porcentaje_entrada_correcta %}
                                    {% if porcentaje_entrada_correcta == "Nada" %}
                                        <p class="percent-score">0%</p>
                                    {% else %}
                                        <p class="percent-score">{{porcentaje_entrada_correcta}}%</p>
                                    {% endif %}
                                {% else %}
                                    {% if porcentaje_entrada_correcta == 0 %}
                                        <p class="percent-score">{{porcentaje_entrada_correcta}}%</p>
                                    {% endif %}
                                {% endif %}
                                <div id="preview-textfield2" style="display:none;"></div> {% endcomment %}
                            </div>
                        </div>
                        <div class="porcientos" id="porcientos2">
                            {% if fecha_con_formato %}
                                <p class="divis">{{fecha_con_formato}}</p>
                            {% else %}
                                {% if fecha %}
                                    <p class="divis">{{fecha}}</p>
                                {% else %}
                                    {% if clase %}
                                        <p class="divis">{{clase}}</p>
                                    {% elif flota %}
                                        <p class="divis">{{flota}}</p>
                                    {% else %}
                                        <p class="divis">Último mes</p>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if porcentaje_entrada_correcta %}
                                {% if porcentaje_entrada_correcta == "Nada" %}
                                    <p class="percent">0/0</p>
                                {% else %}
                                    <p class="percent">{{cantidad_entrada}}/{{cantidad_inflado}}</p>
                                {% endif %}
                            {% else %}
                                {% if porcentaje_entrada_correcta == 0 %}
                                    <p class="percent">{{cantidad_entrada}}/{{cantidad_inflado}}</p>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="graf-barras">
                            <div class="cont_graf-spline">
                                <div id="score-spline2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="horizontal_graficas--2">
                <div id="p3" class="sec2_grafica">
                    <div class="buttons">
                        <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                        <button class="icono-pantallaC" id="ocultarD1" onclick="closeFullscreenP3();"><span class="icon-fullscreen_exit"></span></button>
                        <button class="icono-pantallaC" id="mostrarD1" onclick="openFullscreenP3();"><span class="icon-fullscreen"></span></button>
                        </div>
                    <div id="doughnutC" class="cont-graf_sec2">
                        <div id="doughnut"></div>
                    </div>
                </div>
                <div id="p4" class="sec2_grafica">
                    <div class="buttons">
                        <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                        <button class="icono-pantallaC" id="ocultarL1" onclick="closeFullscreenP4();"><span class="icon-fullscreen_exit"></span></button>
                        <button class="icono-pantallaC" id="mostrarL1" onclick="openFullscreenP4();"><span class="icon-fullscreen"></span></button>
                    </div>
                    <div id="lineGraphC" class="cont-graf_sec2">
                        <div id="lineGraph"></div>
                    </div>
                </div>
            </div>
            <div id="table-wrapper" class="horizontal_graficas--3">
                <div id="table-scroll" class="sec3_grafica--table">
                    <table class="data" qdata>
                        <div class="button-table-cont">

                            <button class="button-table1" onclick="buttonTable1();" buttonT1><p class="vertical-text">Malas Entradas</p></button>
                            <button class="button-table2" onclick="buttonTable2();" buttonT2><p class="vertical-text">Vehículos Vencidos</p></button>

                        </div>
                        {% if vehiculos_periodo %}
                        <thead class="thead1">
                            <tr class="tr1">
                                <th class="espacio">aaaa</th>
                                <th class="td-width1" id="th-icono">Icono</th>
                                <th class="td-width1">Serial</th>
                                <th class="td-width2" id="th-clase">Clase</th>
                                <th class="td-width1">Días sin Inflado</th>
                                <th class="td-width1" id="th-icono">Status</th>
                            </tr>
                        </thead>
                        
                        {% for vehiculo_p, status in vehiculos_periodo.items %}
                        <tbody>

                            <tr class="tr2">
                                <td class="espacio">aaaa</td>
                                <td class="td-color"><img src="{% static 'images/truck.png' %}" alt=""></td>
                                <td class="td-noColor"><a class="td-truck" href="{% url 'dashboards:detail' vehiculo_p.id %}">{{vehiculo_p.numero_economico}}</a></td>
                                <td class="td-color">{{vehiculo_p.clase}}</td>
                                <td class="td-noColor" id="dias {{vehiculo_p.id}}"></td>
                                {% if status == "Doble Entrada" %}
                                    <td class="td-color"><span class="icon-cross"></span><span class="icon-cross"></span></td>
                                {% elif status == "Mala Entrada" %}
                                    <td class="td-color"><span class="icon-cross"></span></td>
                                {% else %}
                                    <td class="td-color"><span class="icon-checkmark"></span></td>
                                {% endif %}
                            </tr>
                        </tbody>
                        {% endfor %}
                    {% endif %}
                    </table>
                    <table class="data1" qdata1>
                        
                        <thead class="thead1">
                            <tr class="tr1">
                                <th class="espacio">aaaa</th>
                                <th class="td-width1" id="th-icono">Icono</th>
                                <th class="td-width1">Serial</th>
                                <th class="td-width2" id="th-clase">Clase</th>
                                <th class="td-width1">Días sin Inflado</th>
                                <th class="td-width1" id="th-icono">Status</th>
                            </tr>
                        </thead>
                        
                        <tbody>

                            <tr class="tr2">
                                <td class="espacio">aaaa</td>
                                <td class="td-color"><img src="{% static 'images/truck.png' %}" alt=""></td>
                                <td class="td-noColor"><a class="td-truck" href="">num-economico</a></td>
                                <td class="td-color">vehiculo</td>
                                <td class="td-noColor" id="dias"></td>
                                <td class="td-color"><span class="icon-cross"></span><span class="icon-cross"></span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>                
            </div>
            <div class="vertical">
            <div id="p5" class="row-vertical">
                <div class="buttons">
                    <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                    <button id="ocultarR1" class="icono-pantallaC" onclick="closeFullscreenP5();"><span class="icon-fullscreen_exit"></span></button> 
                    <button id="mostrarR1" class="icono-pantallaC" onclick="openFullscreenP5();"><span class="icon-fullscreen"></span></button>
                </div>
                <div class="cont-radar" id="rad1">
                    <div id="radar1"></div>
                </div>
            </div>
            <div id="p6" class="row-vertical">
                <div class="buttons">
                    <!--<button onclick="winter();">Gauge</button>
                    <button onclick="spring();">Radar</button>-->
                    <button class="icono-pantallaC"><span class="icon-question-circle-o"></span></button>
                    <button id="ocultarR2" class="icono-pantallaC" onclick="closeFullscreenP6();"><span class="icon-fullscreen_exit"></span></button>
                    <button id="mostrarR2" class="icono-pantallaC" onclick="openFullscreenP6();"><span class="icon-fullscreen"></span></button>
                </div>
                <div class="cont-radar" id="rad2">
                    <div id="radar2"></div>
                </div>
                
            </div>
            <div class="row-fastTime">
                <h2>Tiempo Promedio</h2>
                <div class="text-col4">
                    <span class="icon-chronometer"></span>
                    <p class="time-text">{% if tiempo_promedio %}{{tiempo_promedio}}{% else %}0{% endif %} minutos</p>
                </div> 
            </div>
            </div>
            </div>
    </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.0/dist/chart.min.js"></script>
        <script src="{% static 'js/gauge.js' %}"></script> 
<script>

    document.addEventListener('DOMContentLoaded', (e) => {
        handleButtons('#nav-dash');
    });

    const handleButtons = (container = '') => {
        const buttons = document.querySelectorAll(`${container} > .btn-aeto`); // Tenemos que agregar un id a la nav para decir que ese es el grupo que queremos seleccionar

        buttons.forEach((button) => {
          button.addEventListener('click', (e) => {
            buttons.forEach((item) => item.classList.remove('active'));
            button.classList.add('active');
          });
        });
    };

    function buttonTable1() {
        document.querySelector('[buttonT1]').style.background = "#8a2be2";
        document.querySelector('[buttonT2]').style.background = "#1f1f1f";
        document.querySelector('[qdata1]').style.display = "block";
        document.querySelector('[qdata]').style.display = "none";
    }

    function buttonTable2() {
        document.querySelector('[buttonT2]').style.background = "#8a2be2";
        document.querySelector('[buttonT1]').style.background = "#1f1f1f";
        document.querySelector('[qdata]').style.display = "block";
        document.querySelector('[qdata1]').style.display = "none";
    }

    //licencia de anyChart
    anychart.licenseKey("aeto.com.mx-16056097-34281685");

    //funciones mostrar y ocultar clases
    var elem = document.getElementById('p1');
    function openFullscreenP1() {
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
        document.getElementById('hor1').style.height = "90%";
        document.getElementById('porcientos1').style.fontSize = "4.0rem";
        document.getElementById('mostrarG1').style.display = "none";
        document.getElementById('ocultarG1').style.display = "block"; 
        document.querySelector('.cont_graf-spline').style.height = '50vh'
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    }

    var elem1 = document.getElementById('p2');
    function openFullscreenP2() {
      if (elem1.requestFullscreen) {
        elem1.requestFullscreen();
        document.getElementById('hor2').style.height = "90%";
        document.getElementById('porcientos2').style.fontSize = "4.0rem";
        document.getElementById('mostrarG2').style.display = "none";
        document.getElementById('ocultarG2').style.display = "block"; 
        document.querySelector('.cont_graf-spline').style.height = '50vh'
      } else if (elem1.webkitRequestFullscreen) { /* Safari */
        elem1.webkitRequestFullscreen();
      } else if (elem1.msRequestFullscreen) { /* IE11 */
        elem1.msRequestFullscreen();
      }
    }

    var elem2 = document.getElementById('p3');
    function openFullscreenP3() {
      if (elem2.requestFullscreen) {
        elem2.requestFullscreen();
        document.getElementById('doughnutC').style.height = "100%";
        document.getElementById('doughnutC').style.marginTop = "-2.5vh";
        document.getElementById('mostrarD1').style.display = "none";
        document.getElementById('ocultarD1').style.display = "block";
      } else if (elem2.webkitRequestFullscreen) { /* Safari */
        elem2.webkitRequestFullscreen();
      } else if (elem2.msRequestFullscreen) { /* IE11 */
        elem2.msRequestFullscreen();
      }
    }

    var elem3 = document.getElementById('p4');
    function openFullscreenP4() {
      if (elem3.requestFullscreen) {
        elem3.requestFullscreen();
        document.getElementById('mostrarL1').style.display = "none";
        document.getElementById('ocultarL1').style.display = "block";
      } else if (elem3.webkitRequestFullscreen) { /* Safari */
        elem3.webkitRequestFullscreen();
      } else if (elem3.msRequestFullscreen) { /* IE11 */
        elem3.msRequestFullscreen();
      }
    }

    var elem4 = document.getElementById('p5');
    function openFullscreenP5() {
        if (elem4.requestFullscreen) {
            elem4.requestFullscreen();
            document.getElementById('rad1').style.height = "100%";
            document.getElementById('rad1').style.marginTop = "-2.5vh";
            document.getElementById('mostrarR1').style.display = "none";
            document.getElementById('ocultarR1').style.display = "block";
        }else if (elem4.webkitRequestFullscreen) { /* Safari */
            elem4.webkitRequestFullscreen();
        }else if (elem4.msRequestFullscreen) { /* IE11 */
            elem4.msRequestFullscreen();
        }
    }

    
    function winter() {
    stage.suspend();
    layer_1.zIndex(1000000);
    layer_2.zIndex(0);
    stage.resume();
    };

    function spring() {
    stage.suspend();
    layer_1.zIndex(0);
    layer_2.zIndex(1000000);
    stage.resume();
    };
    var elem5 = document.getElementById('p6');
    function openFullscreenP6() {
      if (elem5.requestFullscreen) {
        elem5.requestFullscreen();
        document.getElementById('mostrarR2').style.display = "none";
        document.getElementById('ocultarR2').style.display = "block";
      } else if (elem5.webkitRequestFullscreen) { /* Safari */
        elem5.webkitRequestFullscreen();
      } else if (elem5.msRequestFullscreen) { /* IE11 */
        elem5.msRequestFullscreen();
      }
    }

    function closeFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('hor1').style.height = "auto";
        document.getElementById('porcientos1').style.fontSize = "1.5rem";
        document.getElementById('mostrarG1').style.display = "block";
        document.getElementById('ocultarG1').style.display = "none";
        document.querySelector('.cont_graf-spline').style.height = '100%';
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    function closeFullscreenP2() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('hor2').style.height = "auto";
        document.getElementById('porcientos2').style.fontSize = "1.5rem";
        document.getElementById('mostrarG2').style.display = "block";
        document.getElementById('ocultarG2').style.display = "none";
        document.querySelector('.cont_graf-spline').style.height = '100%';
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    function closeFullscreenP3() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('doughnutC').style.height = "105%";
        document.getElementById('doughnutC').style.marginTop = "-3.5vh";
        document.getElementById('mostrarD1').style.display = "block";
        document.getElementById('ocultarD1').style.display = "none";
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    function closeFullscreenP4() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('mostrarL1').style.display = "block";
        document.getElementById('ocultarL1').style.display = "none";
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    function closeFullscreenP5() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('rad1').style.height = "108%";
        document.getElementById('rad1').style.marginTop = "-3.5vh";
        document.getElementById('mostrarR1').style.display = "block";
        document.getElementById('ocultarR1').style.display = "none";
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    function closeFullscreenP6() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
        document.getElementById('mostrarR2').style.display = "block";
        document.getElementById('ocultarR2').style.display = "none";
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    }

    var expanded = false;
    function showCheckboxes(){
        var checkboxes = document.getElementById("checkboxes");
        if (!expanded) {
            checkboxes.style.display = "block"; 
            checkboxes.style.position = "fixed";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

    function showCheckboxes2(){
        var checkboxes = document.getElementById("checkboxes2");
        if (!expanded) {
            checkboxes.style.display = "block";
            checkboxes.style.position = "fixed";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

    function showCheckboxes3(){
        var checkboxes = document.getElementById("checkboxes3");
        if (!expanded) {
            checkboxes.style.display = "block";
            checkboxes.style.position = "fixed";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

        window.onload = function dias_sin_inflado(){
                hoy = new Date("{{hoy.month}}/{{hoy.day}}/{{hoy.year}}")
                hoy2 = (cierre(hoy, 1))
                hoy3 = (cierre(hoy, 2))
                hoy4 = (cierre(hoy, 3))
                var rango_1 = 0;
                var rango_2 = 0;
                var rango_3 = 0;
                var mes_1 = 0;
                var mes_2 = 0;
                var mes_3 = 0;
                var mes_4 = 0;


                {% for vehiculo in vehiculos_todos %}
                    {% if vehiculo.fecha_de_inflado %}
                        vehiculo_fecha{{vehiculo.id}} = new Date("{{vehiculo.fecha_de_inflado.month}}/{{vehiculo.fecha_de_inflado.day}}/{{vehiculo.fecha_de_inflado.year}}")
                        var difference= Math.abs(hoy-vehiculo_fecha{{vehiculo.id}});
                        days = Math.round(difference/(1000 * 3600 * 24));
                        {% if vehiculo in vehiculos_periodo %}
                            document.getElementById("dias {{vehiculo.id}}").innerText = days;
                        {% endif %}
                        if (0<=days && days<= {{rango_1}} ){
                            rango_1 = rango_1 + 1;
                        }
                        else if ( {{rango_3}} <=days && days<= {{rango_2}}){
                            rango_2++;
                        }
                        else if ( {{rango_4}} <=days){
                            rango_3++;
                        }
                    {% else %}
                        {% if not boton_intuitivo == "Malas Entradas" %}
                            document.getElementById("dias {{vehiculo.id}}").innerText = "Nunca";
                        {% endif %}
                        rango_3++;
                    {% endif %}
                
                {% endfor %}
                
                function cierre(fecha, num) { 
                    var date = new Date(fecha);
                    /* Javascript recalculará la fecha si el mes es menor de 0 (enero) 
                      o mayor de 11 (diciembre) */
                    date.setMonth(date.getMonth() - num);
                    /* Obtenemos la fecha en formato YYYY-mm */
                    return parseInt(date.toISOString().substring(5, 7));
                  }

                {% for vehiculo_bitacora in bitacoras %}
                    vehiculo_fecha{{vehiculo_bitacora.id}} = new Date("{{vehiculo_bitacora.fecha_de_inflado.month}}/{{vehiculo_bitacora.fecha_de_inflado.day}}/{{vehiculo_bitacora.fecha_de_inflado.year}}")
                    fecha{{vehiculo_bitacora.id}} = vehiculo_fecha{{vehiculo_bitacora.id}}.getMonth() + 1;
                    switch (fecha{{vehiculo_bitacora.id}}){
                        case (hoy.getMonth() + 1):
                            mes_1++;
                            break;
                        case hoy2:
                            mes_2++;
                            break;
                        case hoy3:
                            mes_3++;
                            break;
                        case hoy4:
                            mes_4++;
                            break;
                    }
                    
                {% endfor %}

//pantalla completa poner quitar
/*const iconoPant = document.querySelector('#icon-P');
iconoPant.addEventListener('click', (e) => {
    const rutaActualP = e.target.getAttribute('class');
    if(rutaActualP == 'icon-fullscreen'){
        e.target.setAttribute('class','icon-fullscreen_exit');
    }else{
        e.target.setAttribute('class','icon-fullscreen');
    }
});*/

//graficas
// score gauge
    // var opts = {
    //     angle: -0.2, // The span of the gauge arc
    //     lineWidth: 0.2, // The line thickness
    //     radiusScale: 1, // Relative radius
    //     pointer: {
    //         length: 0.6, // // Relative to gauge radius
    //         strokeWidth: 0.035, // The thickness
    //         color: '#000000' // Fill color
    //     },
    //     limitMax: false,     // If false, max value increases automatically if value > maxValue
    //     limitMin: false,     // If true, the min value of the gauge will be fixed
    //     colorStart: '#6FADCF',   // Colors
    //     colorStop: '#8FC0DA',    // just experiment with them
    //     strokeColor: '#E0E0E0',  // to see which ones work best for you
    //     generateGradient: true,
    //     highDpiSupport: true,     // High resolution support
    //     // color configs
    //     colorStart: "#6fadcf",
    //         colorStop: void 0,
    //         gradientType: 0,
    //         strokeColor: "#e0e0e0",
    //         generateGradient: true,
    //         percentColors: [[0.0, "#a9d70b" ], [0.50, "#f9c802"], [1.0, "#ff0000"]],
    //         // customize pointer
    //         pointer: {
    //         length: 0.8,
    //         strokeWidth: 0.035,
    //         iconScale: 1.0,
    //         color: '#c0c0c0'
    //         },
    //         // static labels
    //         /*staticLabels: {
    //         font: "10px sans-serif",
    //         labels: [200, 500, 2100, 2800],
    //         fractionDigits: 0
    //         },*/
    //         // static zones
    //         staticZones: [
    //         {strokeStyle: "#F03E3E", min: 0, max: 1000},
    //         {strokeStyle: "#FFDD00", min: 1000, max: 2000},
    //         {strokeStyle: "#30B32D", min: 2000, max: 3000}
    //         ],
    //         // render ticks
    //         renderTicks: {
    //         divisions: 5,
    //         divWidth: 1.1,
    //         divLength: 0.7,
    //         divColor: '#333333',
    //         subDivisions: 3,
    //         subLength: 0.5,
    //         subWidth: 0.6,
    //         subColor: '#666666'
    //         },
    //         // the span of the gauge arc
    //         angle: 0.15,

    //         // line thickness
    //         lineWidth: 0.44,

    //         // radius scale
    //         radiusScale: 1.0,

    //         // font size
    //         fontSize: 40,

    //         // if false, max value increases automatically if value > maxValue
    //         limitMax: false,

    //         // if true, the min value of the gauge will be fixed
    //         limitMin: false,

    //         // High resolution support
    //         highDpiSupport: true
            
    //         };
    //score gauge 1
    // var target = document.getElementById('demo'); 
    // var gauge = new Gauge(target).setOptions(opts);
    // document.getElementById("preview-textfield").className = "preview-textfield";
    // gauge.setTextField(document.getElementById("preview-textfield"));
    // gauge.maxValue = 3000;
    // gauge.setMinValue(0); 
    // {% if porcentaje_inflado %}
    //     {% if porcentaje_inflado == "Nada" %}
    //         gauge.set(10);
    //     {% else %}
    //         gauge.set({{porcentaje_inflado}}*30);
    //     {% endif %}
    // {% else %}
    //     gauge.set(10);
    // {% endif %}
    // gauge.animationSpeed = 32;
    // var target = document.getElementById('demo2'); 
    // var gauge = new Gauge(target).setOptions(opts);
    // document.getElementById("preview-textfield2").className = "preview-textfield2";
    // gauge.setTextField(document.getElementById("preview-textfield2"));
    // gauge.maxValue = 3000;
    // gauge.setMinValue(0); 
    // {% if porcentaje_entrada_correcta %}
    //     {% if porcentaje_entrada_correcta == "Nada" %}
    //         gauge.set(10);
    //     {% else %}
    //         gauge.set({{porcentaje_entrada_correcta}}*30);
    //     {% endif %}
    // {% else %}
    //     gauge.set(10);
    // {% endif %}
    // gauge.animationSpeed = 32;

    //bar1
    // var ctx = document.getElementById('bar1').getContext('2d');
    // var myChart = new Chart(ctx, {
    //     type: 'bar',
    //     data: {
    //         labels: ['', '', ''],
    //         datasets: [{
    //             data: [0, 0, {{cantidad_inflado}}],
    //             backgroundColor: [
    //                 'rgba(23, 23, 23, 1)',
    //                 'rgba(23, 23, 23, 1)',
    //                 'rgba(23, 23, 23, 1)'
    //             ],
    //             borderColor: [
    //                 'rgba(246, 170, 111, 1)',
    //                 'rgba(246, 170, 111, 1)',
    //                 'rgba(246, 170, 111, 1)',
    //             ],
    //             borderWidth: 2.5
    //         }]
    //     },
    //     options: {
    //         plugins:{
    //             legend: {
    //                 display: false
    //             }
    //         },
    //         scales: {
    //             y: {
    //                 beginAtZero: true
    //             }
    //         }
    //     }
    // });
// score+spline
anychart.onDocumentReady(function () {
// create data set on our data
var dataSet = anychart.data.set(getData());

// map data for the first series, take x from the zero column and value from the first column of data set
var firstSeriesData = dataSet.mapAs({ x: 0, value: 1 });

// create line chart
var chart = anychart.line();

chart.yScale().ticks().interval(1);

// turn on chart animation
chart.animation(true);

// turn on the crosshair
chart
.crosshair()
.enabled(true)
.yLabel({ enabled: false })
.yStroke(null)
.xStroke('#a349a4')
.zIndex(99);

chart
.yAxis()
.title('')
.labels({ padding: [5, 5, 0, 5] });
chart.xAxis().title('');

// set chart title text settings
chart.title(
);

// create first series with mapped data
var firstSeries = chart.spline(firstSeriesData);
firstSeries.name('');
firstSeries.markers().zIndex(100);
firstSeries.hovered().markers().enabled(true).type('circle').size(4);

// create first series with mapped data
firstSeries.normal().fill("#a349a4");
firstSeries.hovered().fill("#a349a4", 0.1);
firstSeries.selected().fill("#a349a4", 0.5);
firstSeries.normal().stroke("#a349a4");
firstSeries.hovered().stroke("#a349a4", 2);
firstSeries.selected().stroke("#a349a4", 4);
firstSeries.name('');

// set container id for the chart
chart.container('score-spline');

//Set Background
var background = chart.background();
background.stroke('0 #000');
background.corners();
background.enabled(false);

// initiate chart drawing
chart.draw();

// chart credits false
var credits = chart.credits();
credits.enabled(false);

});

function getData() {
  return [
    ['Oct', 1],
    ['Nov', 2],
    ['Dec', 1],
    ['Jan', 0]
  ]
}

//     // score-column
//     anychart.onDocumentReady(function () {
//     // create column chart
//     var chart = anychart.column();

//     // turn on chart animation
//     chart.animation(true);

//     // set chart title text settings
//     chart.title('');

//     // create area series with passed data
//     var series = chart.column([
//         ['{{mes_2}}', {{cantidad_inflado_2}} ],
//         ['{{mes_1}}', {{cantidad_inflado_1}} ],
//     ]);
//     // configure the visual settings of the first series
//     series.normal().fill("#A349A4");
//     series.hovered().fill("#A349A4", 0.1);
//     series.selected().fill("#A349A4", 0.5);
//     series.normal().stroke("#A349A4", 1.5);
//     series.hovered().stroke("#A349A4", 3);
//     series.selected().stroke("#A349A4", 4.5);
//     var titulos = [""];

//     // set series tooltip settings
//     //series.tooltip().titleFormat('{%X}');    
//     series.tooltip().titleFormat('{%3}');
//     //series.tooltip().titleFormat('{%'+titulos+'}');


//     series.tooltip()
//             .position('center-top')
//             .anchor('center-bottom')
//             .offsetX(0)
//             .offsetY(5)

//     chart.yScale().ticks().interval(1);

//     // set scale minimum
//     chart.yScale().minimum(0);

//     // tooltips position and interactivity settings
//     chart.tooltip().positionMode('point');
//     chart.interactivity().hoverMode('by-x');

//     // axes titles
//     chart.xAxis().title('');
//     chart.yAxis().title('');

//     // set container id for the chart
//     chart.container('score-column');
  
//     //Set Background
//         var background = chart.background();
//             background.stroke('0 #000');
//             background.corners();
//             background.enabled(false);

//     // initiate chart drawing
//     chart.draw();
  
//     // chart credits false
//     var credits = chart.credits();
//     credits.enabled(false);

// });
    //bar2
    // var ctx = document.getElementById('bar2').getContext('2d');
    // var myChart = new Chart(ctx, {
    //     type: 'bar',
    //     data: {
    //         labels: ['', '', ''],
    //         datasets: [{
    //             fill: false,
    //             data: [0, 0, {{cantidad_entrada}}],
    //             backgroundColor: [
    //                 'rgba(23, 23, 23, 1)',
    //                 'rgba(23, 23, 23, 1)',
    //                 'rgba(23, 23, 23, 1)'
    //             ],
    //             borderColor: [
    //                 'rgba(246, 170, 111, 1)',
    //                 'rgba(246, 170, 111, 1)',
    //                 'rgba(246, 170, 111, 1)',
    //             ],
    //             borderWidth: 2.5
    //         }]
    //     },
    //     options: {
    //         plugins:{
    //             legend: {
    //                 display: false
    //             }
    //         }
    //     }
    // });
// score+spline2
anychart.onDocumentReady(function () {
// create data set on our data
var dataSet_1 = anychart.data.set(getData());

// map data for the first series, take x from the zero column and value from the first column of data set
var firstSeriesData1 = dataSet_1.mapAs({ x: 0, value: 1 });

// create line chart
var chart = anychart.line();

chart.yScale().ticks().interval(1);

// turn on chart animation
chart.animation(true);

// turn on the crosshair
chart
.crosshair()
.enabled(true)
.yLabel({ enabled: false })
.yStroke(null)
.xStroke('#026cf5')
.zIndex(99);

chart
.yAxis()
.title('')
.labels({ padding: [5, 5, 0, 5] });
chart.xAxis().title('');

// set chart title text settings
chart.title(
);

// create first series with mapped data
var firstSeries1 = chart.spline(firstSeriesData1);
firstSeries1.name('');
firstSeries1.markers().zIndex(100);
firstSeries1.hovered().markers().enabled(true).type('circle').size(4);

// create first series with mapped data
firstSeries1.normal().fill("#026cf5");
firstSeries1.hovered().fill("#026cf5", 0.1);
firstSeries1.selected().fill("#026cf5", 0.5);
firstSeries1.normal().stroke("#026cf5");
firstSeries1.hovered().stroke("#026cf5", 2);
firstSeries1.selected().stroke("#026cf5", 4);
firstSeries1.name('');

// set container id for the chart
chart.container('score-spline2');

//Set Background
var background = chart.background();
background.stroke('0 #000');
background.corners();
background.enabled(false);

// initiate chart drawing
chart.draw();

// chart credits false
var credits = chart.credits();
credits.enabled(false);

});

function getData() {
  return [
    ['Oct', 1],
    ['Nov', 2],
    ['Dec', 1],
    ['Jan', 0]
  ]
}
//     // score-column2
//     anychart.onDocumentReady(function () {
//     // create column chart
//     var chart = anychart.column();

//     // turn on chart animation
//     chart.animation(true);

//     // set chart title text settings
//     chart.title('');

//     // create area series with passed data
//     var series = chart.column([
//         ['{{mes_2}}', "{{cantidad_entrada_barras_mes2}}" ],
//         ['{{mes_1}}', "{{cantidad_entrada_barras_mes1}}" ]
//     ]);
//     // configure the visual settings of the first series
//     series.normal().fill("#026cf5");
//     series.hovered().fill("#026cf5", 0.1);
//     series.selected().fill("#026cf5", 0.5);
//     series.normal().stroke("#026cf5", 1.5);
//     series.hovered().stroke("#026cf5", 3);
//     series.selected().stroke("#026cf5", 4.5);
   
//     var titulos = [""];

//     // set series tooltip settings
//     //series.tooltip().titleFormat('{%X}');    
//     series.tooltip().titleFormat('{%3}');
//     //series.tooltip().titleFormat('{%'+titulos+'}');


//     series.tooltip()
//             .position('center-top')
//             .anchor('center-bottom')
//             .offsetX(0)
//             .offsetY(5)
            
//     chart.yScale().ticks().interval(1);
//     // set scale minimum
//     chart.yScale().minimum(0);

//     // tooltips position and interactivity settings
//     chart.tooltip().positionMode('point');
//     chart.interactivity().hoverMode('by-x');

//     // axes titles
//     chart.xAxis().title('');
//     chart.yAxis().title('');

//     // set container id for the chart
//     chart.container('score-column2');
  
//     //Set Background
//     var background = chart.background();
//     background.enabled(false);

//     // initiate chart drawing
//     chart.draw();
  
//     // chart credits false
//     var credits = chart.credits();
//     credits.enabled(false);

// });

//Score Guage
anychart.onDocumentReady(function () {
  var axisMaximum = 100;
  var data = [
    {% if porcentaje_inflado %}
        {% if porcentaje_inflado == "Nada" %}
            0
        {% else %}
            {{porcentaje_inflado}}
        {% endif %}
    {% else %}
        0
    {% endif %}
  ];
  var dataSet = anychart.data.set(data);

  var circularGauge = anychart.gauges.circular();
  circularGauge.data(dataSet);
  circularGauge.fill(false)
    .stroke(null)
    .padding(0)
    .startAngle(235)
    .sweepAngle(250);
  
circularGauge.needle()
            .stroke('2 #545f69')
            .startRadius('2%')
            .endRadius('100%')
            .startWidth('0.1%')
            .endWidth('0.1%')
            .middleWidth('0.9%');
  
  var circularAxis = circularGauge.axis().radius(70).width(50).fill('#969696');
  circularAxis.scale()
    .minimum(0)
    .maximum(axisMaximum);
  circularAxis.labels().enabled(false);
  circularAxis.ticks().enabled(false);
  circularAxis.minorTicks().enabled(false);

  circularGauge.bar(0).dataIndex(0)
    .radius(70)
    .width(50)
    .fill('#a349a4')
    .stroke(null)
    .zIndex(50);

  circularGauge.bounds('0%','0%', '100%', '100%');

  //enable gauge animation
  animateGauge(circularGauge, 1000);
  
  

    circularGauge.cap()
            .radius('10%')
            .enabled(true)
            .fill('#545f69');

    // Gauge percentage
    circularGauge.label(0)
    .text('<span style="">' + data[0] + '%</span>')
    .useHtml(true)
    .fontSize(17)
    .fontColor('#a349a4')
    .hAlign('center')
    .width("50%")
    .height("80%")
    .anchor('center')
    .offsetY("-100%")
    .offsetX("50%")
    .zIndex(10);
  
  circularGauge.container('score-gauge').draw();

  /**
 * Enables gauge animation.
 *
 * @param {anychart.circularGaugeModule.Chart} gauge chart instance.
 * @param {number} animation duration
 */
  function animateGauge(chart, duration) {
    var originalValue = chart.data().get(0, 'value');
    // set 0 as initial data value 
    chart.data().set(0, 'value', 0);

    // launch the animation when the chart is rendered
    chart.listenOnce('chartDraw', function() {

      // provide animation timing
      var start = performance.now();
      requestAnimationFrame(function animationStep(time) {
        var timePassed = time - start;
        var timeFraction = timePassed / duration;
        if (timePassed > duration) {
          timePassed = duration;
          timeFraction = 1
        }
        //Set Background
        var background = chart.background();
        background.stroke('0 #000');
        background.corners();
        background.enabled(false);
        // chart credits false
        var credits = chart.credits();
        credits.enabled(false);

        
        //redraw by increasing the value from zero to the required one
        chart.data().set(0, 'value', originalValue * timeFraction);
        
        if (timePassed < duration) {
          requestAnimationFrame(animationStep);
        }
      });
    });
  }
});
// score-gauge2
anychart.onDocumentReady(function () {

    var axisMaximum1 = 100;
    var data1 = [
    {% if porcentaje_entrada_correcta %}
        {% if porcentaje_entrada_correcta == "Nada" %}
            0
        {% else %}
            {{porcentaje_entrada_correcta}}
        {% endif %}
    {% else %}
        0
    {% endif %}
    ];
    var dataSet1 = anychart.data.set(data1);

  var circularGauge1 = anychart.gauges.circular();
  circularGauge1.data(dataSet1);
  circularGauge1.fill(false)
    .stroke(null)
    .padding(0)
    .startAngle(235)
    .sweepAngle(250);
  
circularGauge1.needle()
            .stroke('2 #545f69')
            .startRadius('2%')
            .endRadius('100%')
            .startWidth('0.1%')
            .endWidth('0.1%')
            .middleWidth('0.9%');
  
  var circularAxis = circularGauge1.axis().radius(70).width(50).fill('#969696');
  circularAxis.scale()
    .minimum(0)
    .maximum(axisMaximum1);
  circularAxis.labels().enabled(false);
  circularAxis.ticks().enabled(false);
  circularAxis.minorTicks().enabled(false);

  circularGauge1.bar(0).dataIndex(0)
    .radius(70)
    .width(50)
    .fill('#026cf5')
    .stroke(null)
    .zIndex(50);

  circularGauge1.bounds('0%','0%', '100%', '100%');

  //enable gauge animation
  animateGauge(circularGauge1, 1000);
    circularGauge1.cap()
            .radius('10%')
            .enabled(true)
            .fill('#545f69');

    //Gauge percentage
    circularGauge1.label(0)
    .text('<span style="">' + data1[0] + '%</span>')
    .useHtml(true)
    .fontSize(17)
    .fontColor('#026cf5')
    .hAlign('center')
    .width("50%")
    .height("80%")
    .anchor('center')
    .offsetY("-100%")
    .offsetX("50%")
    .zIndex(10);
  
  circularGauge1.container('score-gauge2').draw();

  /**
 * Enables gauge animation.
 *
 * @param {anychart.circularGauge1Module.Chart} gauge chart instance.
 * @param {number} animation duration
 */
  function animateGauge(chart, duration) {
    var originalValue = chart.data().get(0, 'value');
    // set 0 as initial data value 
    chart.data().set(0, 'value', 0);

    // launch the animation when the chart is rendered
    chart.listenOnce('chartDraw', function() {

      // provide animation timing
      var start = performance.now();
      requestAnimationFrame(function animationStep(time) {
        var timePassed = time - start;
        var timeFraction = timePassed / duration;
        if (timePassed > duration) {
          timePassed = duration;
          timeFraction = 1;
        }
        //Set Background
        var background = chart.background();
        background.stroke('0 #000');
        background.corners();
        background.enabled(false);
        // chart credits false
        var credits = chart.credits();
        credits.enabled(false);

        
        //redraw by increasing the value from zero to the required one
        chart.data().set(0, 'value', originalValue * timeFraction);
        
        if (timePassed < duration) {
          requestAnimationFrame(animationStep);
        }
      });
    });
  }
});

                // var ctx = document.getElementById('myChart').getContext('2d');
                // var myChart = new Chart(ctx, {
                //     type: 'doughnut',
                //     data: {
                //         labels: ['0-{{rango_1}} días', '{{rango_3}}-{{rango_2}} días', '{{rango_2}}+'],
                //         datasets: [{
                //             label: '# of Votes',
                //             data: [rango_1, rango_2, rango_3],
                //             backgroundColor: [
                //                 'rgba(51, 241, 17, 0.2)',
                //                 'rgba(255, 206, 86, 0.2)',
                //                 'rgba(255, 99, 132, 0.2)',
                //             ],
                //             borderColor: [
                //                 'rgba(51, 241, 17, 1)',
                //                 'rgba(255, 206, 86, 1)',
                //                 'rgba(255, 99, 132, 1)',
                //             ],
                //             borderWidth: 1
                //         }]
                //     },
                //     options: {
                //         plugins: {
                //             title: {
                //                 display: true,
                //                 text: 'Periodos de inflado',
                //                 font: {
                //                     family: "Montserrat",
                //                     size: 18,
                //                     lineHeight: 0,
                //                 },
                //                 color: 'white',
                //             }
                //         },
                //         // scales: {
                //         //     y: {
                //         //         beginAtZero: true
                //         //     }
                //         // }
                //     }
                // });

//Doughnut
anychart.onDocumentReady(function () {
    
    // create pie chart with passed data
   var chart = anychart.pie([
    {x: "0-{{rango_1}} dias", value: rango_1, fill: '#026CF5'},
    {x: "{{rango_3}}-{{rango_2}} dias", value: rango_2, fill:'#D0F533'},
    {x: "+{{rango_2}} dias", value: rango_3, fill:'#f0412c'}
  ]);
    // set the position of the legend
    var legend = chart.legend();
    legend.position('right');
    legend.align('top');
    legend.itemsLayout('vertical');
    
    // turn on chart animation
    chart.animation(true);

    //Set Background
    var background = chart.background();
    background.stroke('0 #000');
    background.corners();
    background.enabled(false);
    // set chart title text settings
    chart.title('Periodos de inflados')
    //set chart radius
    .radius('100%')
    // create empty area in pie chart
    .innerRadius('60%');
    var title = chart.title();
    title.fontColor('#fff');
    title.fontSize(18);
    title.fontWeight(600);

    // set container id for the chart
    chart.container('doughnut');
    // initiate chart drawing
    chart.draw();
    // chart credits false
    var credits = chart.credits();
    credits.enabled(false);

    // horizontal expandable
    //chart.legend().itemsLayout('horizontal');
});

                // var ctx = document.getElementById('myChart2').getContext('2d');
                // var myChart = new Chart(ctx, {
                //     type: 'line',
                //     data: {
                //         labels: ["{{mes_4}}", "{{mes_3}}", "{{mes_2}}", "{{mes_1}}"],
                //         datasets: [{
                //             label: 'Inflados',
                //             data: [mes_4, mes_3, mes_2, mes_1],
                //             backgroundColor: [
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //             ],
                //             borderColor: [
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //                 'rgba(18, 188, 200, 1)',
                //             ],
                //             borderWidth: 1
                //         },
                //         {
                //             label: 'Entrada',
                //             data: [{{cantidad_entrada_mes4}}, {{cantidad_entrada_mes3}}, {{cantidad_entrada_mes2}}, {{cantidad_entrada_mes1}}],
                //             backgroundColor: [
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)'
                //             ],
                //             borderColor: [
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)'
                //             ],
                //             borderWidth: 1
                //         },
                //         {
                //             label: 'Doble Entrada',
                //             data: [{% for mes, cantidad in cantidad_doble_entrada.items %}{{cantidad}}, {% endfor %}],
                //             backgroundColor: [
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //             ],
                //             borderColor: [
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //                 'rgba(255, 0, 0, 0.6)',
                //             ],
                //             borderWidth: 1
                //         }]
                //     },
                //     options: {
                //         elements: {
                //             point: {
                //                 backgroundColor: "yellow"
                //             }
                //         },
                //         plugins: {
                //             title: {
                //                 display: true,
                //                 text: 'Cantidad de vehículos Vs Inflados',
                //                 font: {
                //                     family: "Montserrat",
                //                     size: 18,
                //                     lineHeight: 0
                //                 },
                //                 color: 'white',
                //             },
                //         },
                //         scales: {
                //             y: {
                //                 beginAtZero: true
                //             }
                //         }
                //     },
                // });
//line                
anychart.onDocumentReady(function () {

    // set the default types of legend icons
    anychart.theme({
    chart: {
    defaultSeriesSettings: {
    spline: {legendItem: {iconType: "spline"}},
    column: {legendItem: {iconType: "column"}}
    }
  }
});

    // create data set on our data
    var dataSet = anychart.data.set(getData());

    // map data for the first series, take x from the zero column and value from the first column of data set
    var seriesData_1 = dataSet.mapAs({'x': 0, 'value': 1});

    // map data for the second series, take x from the zero column and value from the second column of data set
    var seriesData_2 = dataSet.mapAs({'x': 0, 'value': 2});

    // map data for the third series, take x from the zero column and value from the third column of data set
    var seriesData_3 = dataSet.mapAs({'x': 0, 'value': 3});

    // create line chart
    var chart = anychart.line();

    // turn on chart animation
    chart.animation(true);

    // set chart padding
    chart.padding([10, 20, 5, 20]);

    // turn on the crosshair
    chart.crosshair()
            .enabled(true)
            .yLabel(false)
            .yStroke(null);

    // set tooltip mode to point
    chart.tooltip().positionMode('point');

    // set chart title text settings
    chart.title('Cantidad de vehiculos Vs Inflados');
    var title = chart.title();
    title.fontColor('#fff');
    title.fontSize(18);
    title.fontWeight(600);

    // set yAxis title
    chart.xAxis().labels().padding(5);

    // create first series with mapped data
    var series_1 = chart.column(seriesData_1);
    series_1.normal().fill("#0097fc");
    series_1.hovered().fill("#0097fc", 0.1);
    series_1.selected().fill("#0097fc", 0.5);
    series_1.normal().stroke("#0097fc");
    series_1.hovered().stroke("#0097fc", 2);
    series_1.selected().stroke("#0097fc", 4);
    series_1.name('Inflados');
    series_1.hovered().markers()
            .enabled(true)
            .type('circle')
            .size(4);
    series_1.tooltip()
            .position('right')
            .anchor('left-center')
            .offsetX(5)
            .offsetY(5);

    // create second series with mapped data
    var series_2 = chart.spline(seriesData_2);
    series_2.normal().stroke("#A349A4", 4);
    series_2.hovered().stroke("#A349A4", 2);
    series_2.selected().stroke("#A349A4", 6);
    series_2.name('Mala Entrada');
    series_2.hovered().markers()
            .enabled(true)
            .type('circle')
            .size(4);
    series_2.tooltip()
            .position('right')
            .anchor('left-center')
            .offsetX(5)
            .offsetY(5);

     // enable and configure markers on the first series
    series_2.markers(true);
    series_2.markers().type("circle");
    series_2.markers().fill("#A349A4");
    series_2.markers().size(5);


    // create third series with mapped data
    var series_3 = chart.spline(seriesData_3);
    series_3.normal().stroke("#F0412C", 4);
    series_3.hovered().stroke("#F0412C", 2);
    series_3.selected().stroke("#F0412C", 6);
    series_3.name('Doble Entrada');
    series_3.hovered().markers()
            .enabled(true)
            .type('circle')
            .size(4);
    series_3.tooltip()
            .position('right')
            .anchor('left-center')
            .offsetX(5)
            .offsetY(5);

    // enable and configure markers on the first series
    series_3.markers(true);
    series_3.markers().type("square");
    series_3.markers().fill("#F0412C");
    series_3.markers().size(5);   

    // turn the legend on
    chart.legend()
            .enabled(true)
            .fontSize(13)
            .padding([0, 0, 10, 0]);

    chart.yScale().ticks().interval(1);

    // set container id for the chart
    chart.container('lineGraph');

   //Set Background
   var background = chart.background();
            background.stroke('0 #000');
            background.corners();
            background.enabled(false);

    // initiate chart drawing
    chart.draw();

    // chart credits false
    var credits = chart.credits();
    credits.enabled(false);

    // horizontal expandable
    chart.legend().itemsLayout('horizontal');
});

function getData() {
    return [
        ['{{mes_4}}', mes_4, {{cantidad_entrada_mes4}}, {{doble_entrada.1.mes4}}],
        ['{{mes_3}}', mes_3, {{cantidad_entrada_mes3}}, {{doble_entrada.1.mes3}}],
        ['{{mes_2}}', mes_2, {{cantidad_entrada_mes2}}, {{doble_entrada.1.mes2}}],
        ['{{mes_1}}', mes_1, {{cantidad_entrada_mes1}}, {{doble_entrada.1.mes1}}],
    ]
}

                /*radar1*/

                // var ctx = document.getElementById('radar1').getContext('2d');
                // var myChart1 = new Chart(ctx, {
                //     type: 'radar',
                //     data: {
                //         labels: [
                //                 {% if clases_mas_frecuentes_infladas %}
                //                     {% for clase in clases_mas_frecuentes_infladas %}
                //                         '{{clase}}', 
                //                     {% endfor %}
                //                 {% else %}
                //                     0, 0, 0, 0, 0, 0, 0, 0
                //                 {% endif %}
                //                     ],
                //         datasets: [{
                //             label: '%',
                //             data: [
                //                 {% if clases_mas_frecuentes_infladas %}
                //                     {% for clase, num in clases_mas_frecuentes_infladas.items %}
                //                         '{{num}}', 
                //                     {% endfor %}
                //                     ],
                //                 {% else %}
                //                     0, 0, 0, 0, 0, 0, 0, 0
                //                     ],
                //             pointRadius: 0,
                //             pointHitRadius: 0,
                //             {% endif %}

                //             backgroundColor: [
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)',
                //                 'rgba(246, 170, 111, 0.2)'
                //             ],
                //             borderColor: [
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)',
                //                 'rgba(246, 170, 111, 1)'
                //             ],
                //             borderWidth: 1
                //         }]
                //     },
                //     options: {
                //         plugins: {
                //             legend: {
                //                 display: false
                //             },
                //             title: {
                //                 display: true,
                //                 text: 'Porcentaje de clase de vehículos inflados',
                //                 font: {
                //                     family: "Montserrat",
                //                     size: 18,
                //                     lineHeight: 0
                //                 },
                //                 color: 'white'
                //             }
                //         },
                //         scales: {
                //             y: {
                //                 display: false
                //             },
                //             r: {
                //                 pointLabels:{
                //                     /*ma o meno así*/
                //                     display: false,
                //                     font:{
                //                         size: 24
                //                     }
                //                 },
                //                 grid:{
                //                     color:'#fff'
                //                 },
                //                 angleLines:{
                //                     color:'#fff'
                //                 },
                //                 max: {% if radar_max %}{{radar_max}} + 1{% else %}10{% endif %},
                //                 min: {% if radar_min %}{{radar_min}}{% else %}0{% endif %},
                //                 ticks: {
                //                     display: false,
                //                     color: 'white',
                //                     showLabelBackdrop: false
                //                 },
                //             }
                //         }
                //     }
                // });
//radar1
anychart.onDocumentReady(function () {
    // create data set on our data
    var chart = anychart.radar();

    // turn on chart animation
    chart.animation(true);

    var series = chart.area([
                    {% if clases_mas_frecuentes_infladas %}
                        {% for clase, num in clases_mas_frecuentes_infladas.items %}
                            {x: '{{clase}}', value:{{num}} }, 
                        {% endfor %}
                    {% else %}
                        {x:" ", value:0},
                        {x:"  ", value:0},
                        {x:"   ", value:0},
                        {x:"    ", value:0},
                        {x:"     ", value:0},
                        {x:"      ", value:0},
                        {x:"       ", value:0},
                        {x:"        ", value:0},
                    {% endif %}
    ]);

    chart.title("Porcentaje de Clase de Vehículos Inflados");
    var title = chart.title();
    title.fontColor('#fff');
    title.fontSize(18);
    title.fontWeight(600);
    series.name("%");

    series.normal().fill('#a349a4', 0.5);
    series.hovered().fill('#a349a4', 0.3);
    series.selected().fill('#a349a4', 0.5);
    series.normal().stroke('#a349a4', 6);
    series.hovered().stroke('#a349a4', 3);
    series.selected().stroke('#a349a4', 8);


    var background = chart.background();

    background.stroke('0 #000');
    background.corners(12);            
    background.enabled(false);
    // chart credits false
    var credits = chart.credits();
    credits.enabled(false);

    // set default series type
    chart.defaultSeriesType('area');

    // set chart data

    // force chart to stack values by Y scale.
    chart.yScale().stackMode();

    // set yAxis settings
    chart.yAxis().stroke('#fff');
    chart.yAxis().ticks().stroke('#fff');

    // set xAxis settings
    var xlabels = chart.xAxis().labels();
    xlabels.fontSize(20);
    xlabels.enabled(false);
    // var button = document.getElementById("mostrar-clase");
    document.getElementById('mostrarR1').addEventListener('click',mostrarC);
    document.getElementById('ocultarR1').addEventListener('click',ocultarC);
    function mostrarC() {
        xlabels.enabled(true);
    }
    function ocultarC() {
        xlabels.enabled(false);
    }
    // set yAxis labels settings
    chart.yAxis().labels()
            .fontColor('#fff')
            .format('{%Value}%');

    // set yScales 
    chart.yScale().minimum(0).maximum(100);

    // set chart legend settings
    chart.legend().enabled(false);

    //set title settings
    chart.title().fontColor('#fff');

    // set container id for the chart
    chart.container('radar1');
    // initiate chart drawing
    chart.draw();
});

// Gauge-radar2
    anychart.onDocumentReady(function () {

    // set stage
    stage = anychart.graphics.create("radar2");

    // set layers

    //for the Winter Sales chart
    layer_1 = stage.layer();
    layer_1.zIndex(80);
    //for the Spring Sales chart
    layer_2 = stage.layer();
    //for the buttons
    layer_5 = stage.layer();
    layer_5.zIndex(100);

    // set data for the Winter Sales
var names = [{% for aplicacion in aplicaciones_mas_frecuentes_infladas %}"{{aplicacion}}",{% endfor %}];
var data_1 = [{% for aplicacion, num in aplicaciones_mas_frecuentes_infladas.items %}{{num}},{% endfor %}];
var dataSet_1 = anychart.data.set(data_1);
var palette = anychart.palettes.distinctColors().items(['#00e5f3', '#1976d2']);
  
var makeBarWithBar = function Gauge (gauge, radius, i, width, without_stroke) {
    var stroke = '5 #e5e4e4';
    if (without_stroke) {
        stroke = null;
        gauge.label(i)
                .text(names[i] + ', <span style="color:#fff">' + data_1[i] + '%</span>')// color: #7c868e
                .useHtml(true);
        gauge.label(i)
                .hAlign('center')
                .vAlign('middle')
                .anchor('right-center')
                .padding(0, 0)
                .height(width / 1 + '%')
                .offsetY(radius + '%')
                .offsetX(0);
    }
    gauge.bar(i).dataIndex(i)
            .radius(radius)
            .width(width)
            .fill(palette.itemAt(i))
            .stroke(null)
            .zIndex(5);
    gauge.bar(i + 100).dataIndex(5)
            .radius(radius)
            .width(width)
            .fill('#ffff00')
            .stroke(stroke)
            .zIndex(4);

    return gauge.bar(i)
};
    var gauge = anychart.gauges.circular();
    gauge.title("Porcentaje de Aplicación de Vehículos Inflados");
    var title = gauge.title();
    title.fontColor('#fff');
    title.fontSize(18);
    title.fontWeight(600);
  
    gauge.padding(0, 0, 0, 0);
    gauge.data(dataSet_1);
    gauge.stroke(null);
    gauge.fill(false)
            .stroke(null)
            .padding(0)
            .margin(0)
            .startAngle(0)
            .sweepAngle(270);

    var axis = gauge.axis().radius(100).width(1).fill(null);
    axis.scale()
            .minimum(0)
            .maximum(100)
            .ticks({interval: 1})
            .minorTicks({interval: 1});
            axis.labels().enabled(false);
            axis.ticks().enabled(false);
            axis.minorTicks().enabled(false);
            {% for aplicacion in aplicaciones_mas_frecuentes_infladas %}
                makeBarWithBar(gauge, 100, 0, 17, true);
            {% endfor %}

    var background = gauge.background();

    background.stroke('0 #000');
    background.corners(0); 
    background.enabled(true);
    background.fill('#202020');

    // turn on chart animation
    gauge.animation(true);

    gauge.container(layer_1).draw();

    //radar2
    // create data set on our data
    var data_2 = [
      {x:" ", value:0},
      {x:"  ", value:0},
      {x:"   ", value:0},
      {x:"    ", value:0},
      {x:"     ", value:0},
      {x:"      ", value:0},
      {x:"       ", value:0},
      {x:"        ", value:0}
    ];
    // create a chart
    var chart_2 = anychart.radar();
  
    // create a line series and set the data
    var series_2 = chart_2.area(data_2);
    series_2.stroke(null);

    chart_2.title("Porcentaje de Aplicación de Vehículos Inflados");
    var title = chart_2.title();
    title.fontColor('#fff');
    title.fontSize(18);
    title.fontWeight(600);
    chart_2.padding(50, 0, 0, 0);
  
    series_2.name("%");
    series_2.normal().fill('#a349a4', 0.5);
    series_2.hovered().fill('#a349a4', 0.3);
    series_2.selected().fill('#a349a4', 0.5);
    series_2.normal().stroke('#a349a4', 6);
    series_2.hovered().stroke('#a349a4', 3);
    series_2.selected().stroke('#a349a4', 8);

    // turn on chart animation
    chart_2.animation(true);

    var background = chart_2.background();

    background.stroke('0 #000');
    background.corners(12); 
    background.enabled(true);
    background.fill('#171717');
    // chart credits false
    var credits = chart_2.credits();
    credits.enabled(false);

    // set default series type
    chart_2.defaultSeriesType('area');

    // force chart to stack values by Y scale.
    chart_2.yScale().stackMode();

    // set yAxis settings
    chart_2.yAxis().stroke('#545f69');
    chart_2.yAxis().ticks().stroke('#545f69');

    // set xAxis settings
    var xlabels = chart_2.xAxis().labels();
    xlabels.fontSize(10);
    // var button = document.getElementById("mostrar-clase");
    if (chart_2.requestFullscreen) {
        xlabels.enabled(true);    
    }else{
        xlabels.enabled(false);
    }

    // set yAxis labels settings
    chart_2.yAxis().labels()
            .fontColor('#545f69')
            .format('{%Value}%');

    // set yScales 
    chart_2.yScale().minimum(0).maximum(100);

    // set chart legend settings
    chart_2.legend().enabled(false);

    //set title settings
    chart_2.title().fontColor('#fff');

    // set container id for the chart
    chart_2.container(layer_2).draw();
  
});

     
    /*rango de fechas*/
    $(function() {
        $('input[name="fecha1"]').daterangepicker({
            opens: 'left',
            autoUpdateInput: false,
            "autoApply": true
        },
        function(start, end, label) {
            console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
        });
        $('input[name="fecha1"]').on('apply.daterangepicker', function(ev, picker) {
            $(this).val(picker.startDate.format('MM/DD/YYYY') + ' - ' + picker.endDate.format('MM/DD/YYYY'));
        });
    });
    // $(document).ready(function(){
    //     $('#mostrar-clase').click(function(){
    //         myChart1.options.scales.r.pointLabels.display = true;
    //   });
    // });
    // $(document).ready(function(){
    //     $('#ocultar-clase').click(function(){
    //         myChart1.options.scales.r.pointLabels.display = false;
    //   });
    // });
}//ESTA LLAVE NO SE BORRA
</script>

</body>
</html>