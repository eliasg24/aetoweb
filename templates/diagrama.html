{% extends 'base.html' %}

{% block head %}
    {% load static %}
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/diagrama.css' %}"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AETO WEB</title>
{% endblock %}
{% block content %}
    <div class="all-cont">
      <header class="d-flex navbar">
        <img class="img-logo" src="{% static 'images/Grupo 66.png' %}" />

        <nav class="d-flex nav-items">
          <button class="btn disabled">
            <i class="icon-cross"></i>
          </button>

          <button class="btn disabled">
            <i class="icon-checkmark"></i>
          </button>
        </nav>
      </header>

      <div class="main-cont">
        <h1 class="main-title">Edición manual</h1>

        <div class="d-grid container">
          <div class="col-1 d-grid three-shaft">
            <div class="par-llantas">
              <div class="good" id="llanta"></div>

              <span class="icon-da"></span>

              <div class="good" id="llanta"></div>
            </div>

            <div class="doble-llanta">
              <div class="yellow" id="llanta"></div>
              <div class="yellow" id="llanta"></div>

              
              <span class="icon-central-axle"></span>

              <div class="yellow" id="llanta"></div>
              <div class="yellow" id="llanta"></div>
            </div>

            <div class="doble-llanta">
              <div class="bad" id="llanta"></div>
              <div class="bad" id="llanta"></div>

              <span class="icon-central-axle"></span>

              <div class="bad" id="llanta"></div>
              <div class="bad" id="llanta"></div>
            </div>
          </div>

          <div class="col-2">
            <form class="manual-edit">
              <h3>Manual edit</h3>

              <h4 id="tire-title">Select a tire</h4>

              <div class="label-group">
                <label for="">Número economico</label>
                <input type="text" id="economic-number" value="" />
              </div>

              <div class="label-group">
                <label for="">Producto</label>
                <div class="label-input-options">
                  <input autocomplete="on" list="suggestions" />
                  <datalist id="suggestions">
                    <option value="option 1"></option>
                    <option value="option 2"></option>
                    <option value="option 3"></option>
                    <option value="option 4"></option>
                    <option value="option 5"></option>
                  </datalist>
                </div>
              </div>

              <div class="label-group">
                <label for="">kilometraje montado</label>
                <input type="text" />
              </div>

              <div class="label-group">
                <label for="">Kilometraje</label>
                <input type="text" />
              </div>

              <div class="label-group">
                <label for="">Profundidad actual</label>
                <input type="text" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      const Llanta = () => {
        //Creando un web component
        const llantas = document.querySelectorAll('#llanta');

        llantas.forEach((llanta, key) => {
          llanta.innerHTML = `
                <span class="icon-tire2" data-tire-id="${key + 1}"></span>
                <div class="pop-out-llanta"></div>
                `;
        });
      };

      Llanta();

      const hoverLlantas = () => {
        const llantas = document.querySelectorAll('#llanta > .pop-out-llanta');

        llantas.forEach((llanta, key) => {
          llanta.textContent = `Tire #${key + 1}`;
        });
      };

      hoverLlantas();

      const manualEdit = () => {
        const tireTitle = document.getElementById('tire-title'),
          economicNumber = document.getElementById('economic-number');

        document.addEventListener('click', ({ target }) => {
          if (target.matches('.icon-tire2')) {

            document.querySelectorAll('.select').forEach(item => item.classList.remove('select')); // limpiando las llantas
            target.classList.add('select'); // Agregando la clase de selección

            tireTitle.textContent = `Tire #${target.getAttribute(
              'data-tire-id' 
            )}`; // Titulo de la llanta

            economicNumber.setAttribute(
              // Colocando el numero economico en el input
              'value',
              Math.floor(Math.random() * 1000)
            );

          }
        });

      };

      manualEdit();
    </script>
{% endblock %}
